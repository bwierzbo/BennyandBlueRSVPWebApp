---
name: Database Schema Enhancement
status: open
created: 2025-09-18T03:57:57Z
updated: 2025-09-18T04:14:39Z
github: https://github.com/bwierzbo/BennyandBlueRSVPWebApp/issues/11
depends_on: []
parallel: false
conflicts_with: []
---

# Task: Database Schema Enhancement

## Description
Add guest names support to the existing `rsvps` table by adding a JSONB field for storing up to 10 guest names. Update existing database utilities to handle the new field while maintaining backward compatibility with existing data.

## Acceptance Criteria
- [ ] `guest_names` JSONB field added to `rsvps` table
- [ ] Database migration script created and tested
- [ ] Existing database utilities updated to handle guest names
- [ ] TypeScript interfaces updated for guest names support
- [ ] Schema changes are backward compatible with existing data
- [ ] Database connection and CRUD operations tested with guest names

## Technical Details
- **Implementation approach**:
  - Add `guest_names JSONB` column to existing `rsvps` table
  - Update `scripts/init-db.ts` with schema modification
  - Enhance database utilities in `lib/db.ts` for guest names handling
  - Update TypeScript interfaces in `types/index.ts`
- **Key considerations**:
  - JSONB allows flexible storage and querying of guest names array
  - Maintain backward compatibility for existing RSVPs without guest names
  - Ensure proper indexing for performance if needed
- **Code locations/files affected**:
  - `scripts/init-db.ts` - Schema definition update
  - `lib/db.ts` - Database utilities enhancement
  - `types/index.ts` - TypeScript interface updates
  - `.env.example` - Documentation of any new environment variables

## Dependencies
- [ ] Existing Neon database connection and credentials
- [ ] Completed webappframework epic with basic database setup
- [ ] Access to update database schema in development environment

## Effort Estimate
- Size: M
- Hours: 4-6 hours
- Parallel: false (foundation task for all other work)

## Definition of Done
- [ ] Database schema updated with guest_names JSONB field
- [ ] Migration script successfully creates new field
- [ ] Database utilities handle guest names create/read operations
- [ ] TypeScript interfaces compiled without errors
- [ ] Backward compatibility verified with existing RSVP data
- [ ] Database tests pass with sample guest data